<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
      crossorigin="anonymous"
    />
    <title>Document</title>
  </head>
  <body>
    <h1 class="text-center">Add New User</h1>

    <div class="container col-5">
      <div class="row justify-content-center">
        <div class="col-md-6 mt-5">
          <form action="" method="post" id="new-form">
            <div class="form-group">
              <label for="name">Name</label>
              <input
                type="text"
                class="form-control"
                id="nameing"
                placeholder="Enter name"
                name="name"
              />
            </div>
            <div class="form-group">
              <label for="email">Email address</label>
              <input
                type="email"
                class="form-control"
                id="emailing"
                placeholder="Enter email"
                name="email"
              />
            </div>
            <div class="form-group">
              <label for="mobile">Mobile Number</label>
              <input
                type="tel"
                class="form-control"
                id="mobiles"
                placeholder="Enter mobile number"
                name="mobile"
              />
            </div>
            <div class="form-group">
              <label for="password">Password</label>
              <input
                type="password"
                class="form-control"
                id="passwords"
                placeholder="Password"
                name="pass"
              />
            </div>
            <div class="form-group">
              <label for="confirm-password">Confirm Password</label>
              <input
                type="password"
                class="form-control"
                id="confirm-password"
                placeholder="Confirm Password"
                name="passone"
              />
            </div>
            <button type="submit" class="btn btn-success">Add User</button>
          </form>

          <% if(typeof message !=='undefined' ) { %>
          <p style="color: red"><%= message %></p>
          <% } %>
          <a href="/admin/dashboard" class="btn btn-primary">Go Back</a>
        </div>
      </div>
    </div>
    <script>
      const form = document.getElementById("new-form");
      const mobileRegex = /^\d{10}$/;
      const nameRegex = /^[a-zA-Z0-9]{3,20}$/;
      const passwordRegex =
        /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d@$!%*?&]{8,20}$/;
      const emailRegex = /^\S+@\S+\.\S+$/;

      form.addEventListener("submit", (event) => {
        event.preventDefault();
        const namein = document.getElementById("nameing").value;
        const emailin = document.getElementById("emailing").value;
        const mobilein = document.getElementById("mobiles").value;
        const passwordin = document.getElementById("passwords").value;
        const password2in = document.getElementById("confirm-password").value;

        if (!nameRegex.test(namein)) {
          alert("Please enter a valid name.");
          // namein.focus();
          return;
        }

        if (!emailRegex.test(emailin)) {
          //  = "please enter a valid email";
          alert("please enter a valid email");
          // emailin.focus();
          return;
        }
        if (!mobileRegex.test(mobilein)) {
          alert("Please enter a valid 10-digit mobile number.");
          // mobilein.focus();
          return;
        }
        if (!passwordRegex.test(passwordin)) {
          alert("Password must be at least 8 characters long.");
          // passwordin.focus();
          return;
        }
        if (passwordin !== password2in) {
          alert("passwords don't match");
          return;
        }
        form.submit();
      });
    </script>
  </body>
</html>
